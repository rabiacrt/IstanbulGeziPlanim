<!DOCTYPE html>
<html lang="en">

<head>
   <meta charset="UTF-8">
   <meta name="viewport" content="width=device-width, initial-scale=1.0">
   <link rel="stylesheet" href="public/css/index.css">
   <script type="module" src="/database.js" defer></script>
   <script type="module" src="/logout.js" defer></script>
   <script type="module" src="auth.js" defer></script>
   <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css"
      integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA=="
      crossorigin="anonymous" referrerpolicy="no-referrer" />
   <title>İstanbul Gezi Planım</title>
</head>

<body>

   <!-- Topbar burada ayarlandı -->
   <div class="topbar">
      <div class="wrapper target">
         <div class="left">
            <i class="fa-solid fa-cloud-sun weather-icon" onclick="fetchWeather()"></i>
            <i class="fa-solid fa-bullhorn announcement-icon" onclick="openPopup()"></i>
         </div>
         <div class="center">
            <a href="/">ANASAYFA</a>
            <a href="pages/map.html">HARİTA</a>
            <a href="pages/rota.html">ÖRNEK ROTALAR</a>
            <a href="pages/add.html">GLOG</a>
            <a href="pages/addPost.html" id="postEkle" style="display: none;">EKLE</a>
            <a href="pages/myMap.html" id="benimHaritam" style="display: none;">BENİM HARİTAM</a>
            <a href="pages/login.html" id="girisYap">GİRİŞ YAP</a>
            <a href="pages/register.html" id="kayitOl">KAYIT OL</a>
            <a href="#" id="cikisYap" style="display: none;">ÇIKIŞ YAP</a>
         </div>
         <div class="right">
            
         </div>
      </div>
   </div>

   <!-- Duyurular -->
   <div class="popup-overlay" id="popupOverlay"></div>

   <div class="popup" id="popup">
      <div class="popup-header">
         <h3>DUYURULAR</h3>
         <button class="close-button" onclick="closePopup()">×</button>
      </div>
      <div class="popup-content">
         <p>Duyuru 1: Beylerbeyi Sarayı'nın Bahçe ve Rıhtım bölümü 15 Eylül 2024 tarihine kadar Cuma, Cumartesi ve Pazar günleri saat 22.00'ye kadar ziyaret edilebilecek.</p><br>
         <p>Duyuru 2: Cumhuriyetin 100. yılını büyük bir onur ve coşkuyla kutlayan, ikinci yüzyıla doğru atılan her adımı “Demokrasi Yüzyılı” etkinlikleriyle taçlandıran İBB’nin ev sahipliğini üstlendiği “Yeraltının Kapıları – Geçiş ve Yansıma ile Mekâna Dokunma; Vlastimil Beránek” sergisi, 1 Ağustos – 30 Kasım 2024 tarihleri arasında ziyaretçilerini bekliyor.</p>
      </div>
   </div>

   <!-- Hava durumu -->
   <div class="popup-overlay" id="weatherPopupOverlay"></div>

   <div class="popup" id="weatherPopup">
      <div class="popup-header">
         <h3>Hava Durumu</h3>
         <button class="close-button" onclick="closeWeatherPopup()">×</button>
      </div>
      <div class="popup-content" id="weatherPopupContent">
        
      </div>
   </div>

   <header class="header target">
      <img src="public/img/ist.jpg" alt="background">
      <h1>İSTANBUL</h1>
      <h3>GEZİ PLANIM</h3>
   </header>

   <div class="home">
      <div class="wrapper target">
         <div class="text">
            <h1>Harita ile İstanbul'u Keşfet</h1>
            <p>Eğer İstanbul’u keşfetmek istiyorsanız ve nasıl gezmeniz gerektiğinden emin değilseniz, doğru yerdesiniz! Bir tıklamayla İstanbul'da mutlaka görmeniz gereken önemli yerleri keşfedebilirsiniz. Müze, saray gibi yapıların konumlarını farklı ikonlarla gösterilmiş olarak bulabilir ve bu yerler hakkında kısa bilgilere ulaşabilirsiniz.</p>
         </div>
         <div class="photo">
            <a href="pages/map.html">
               <img src="/public/img/denemeMap.png" alt="Topkapı Sarayı">
            </a>
         </div>
      </div>

      <div class="wrapper target">
         <div class="text">
            <h1>Örnek Rotalar</h1>
            <p>Gezmeye nereden başlayacağınızı bilmiyor ve kararsızsanız, örnek rotalardan birini seçebilirsiniz. Yakın konumlarda bulunan tarihi yerler ve müzeleri hangi sırayla ziyaret edebileceğinizi kolayca öğrenebilirsiniz.</p>
         </div>
         <div class="photo">
            <a href="pages/rota.html">
               <img src="public/img/rota.png" alt="">
            </a>
         </div>
      </div>

      <div class="wrapper target">
         <div class="text">
            <h1>Glog</h1>
            <p>Ziyaret edeceğiniz yerler hakkında detaylı bilgi sahibi olmak istiyorsanız, daha önce bu yerleri gezmiş olan kullanıcıların yorumlarını inceleyebilir ve siz de kendi deneyimlerinizi paylaşabilirsiniz!</p>
         </div>
         <div class="photo">
            <a href="pages/add.html">
               <img src="public/img/blog.png" alt="">
            </a>
         </div>
      </div>

      <div class="wrapper target">
         <div class="text">
            <h1>Kendi Haritanı Oluştur</h1>
            <p>Siteye üye olup giriş yaptıktan sonra, daha önce ziyaret ettiğiniz yerleri veya görmek istediğiniz yerleri kendi haritanızı oluşturarak kolayca takip edebilirsiniz. Bu sayede gezi rotanızı oluştururken zamandan tasarruf edebilirsiniz.</p>
         </div>
         <div class="photo">
            <a href="pages/register.html">
               <img src="public/img/myMap.png" alt="">
            </a>
         </div>
      </div>
   </div>

   <script>
      function openPopup() {
         document.getElementById("popup").style.display = "block";
         document.getElementById("popupOverlay").style.display = "block";
      }

      function closePopup() {
         document.getElementById("popup").style.display = "none";
         document.getElementById("popupOverlay").style.display = "none";
      }

      function openWeatherPopup() {
         document.getElementById("weatherPopup").style.display = "block";
         document.getElementById("weatherPopupOverlay").style.display = "block";
      }

      function closeWeatherPopup() {
         document.getElementById("weatherPopup").style.display = "none";
         document.getElementById("weatherPopupOverlay").style.display = "none";
      }

      const apiKey = '89148324bf986fe75f2448b13be230cc'; // OpenWeather API Key
      const city = 'Istanbul'; 

      async function fetchWeather() {
         try {
            const response = await fetch(`https://api.openweathermap.org/data/2.5/weather?q=${city}&appid=${apiKey}&units=metric`);
            const data = await response.json();
            
            const weatherDescription = data.weather[0].description;
            const temperature = data.main.temp;
            const weatherIcon = data.weather[0].icon; // Icon kodu
            
            displayWeather(weatherDescription, temperature, weatherIcon);
         } catch (error) {
            console.error('Hava durumu verileri alınırken bir hata oluştu:', error);
         }
      }

      function displayWeather(description, temperature, icon) {
         const popupContent = document.getElementById('weatherPopupContent');
         
         // OpenWeather'dan gelen simge URL'si
         const iconUrl = `http://openweathermap.org/img/wn/${icon}@2x.png`;

         popupContent.innerHTML = `
            <img src="${iconUrl}" alt="${description}" style="width: 100px; height: 100px;">
            <p>Hava durumu: ${description}</p>
            <p>Sıcaklık: ${temperature}°C</p>
         `;

         openWeatherPopup();
      }
   </script>

   <script src="public/js/scroll.js"></script>

</body>

</html>
